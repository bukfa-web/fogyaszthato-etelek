<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Étel Adatbázis</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192x192.png" />
    <link rel="apple-touch-icon" href="icon-192x192.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .custom-dropdown {
            position: relative;
            width: 100%;
        }
        .custom-dropdown input, .custom-dropdown select {
            width: 100%;
            padding: 8px;
            background-color: #374151;
            color: #f3f4f6;
            border: 1px solid #4b5563;
            border-radius: 0.5rem;
        }
        .custom-dropdown .options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #374151;
            border: 1px solid #4b5563;
            border-radius: 0.5rem;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
        }
        .custom-dropdown .options div {
            padding: 8px;
            cursor: pointer;
        }
        .custom-dropdown .options div:hover {
            background-color: #4b5563;
        }
        .sort-icon {
            display: inline-block;
            margin-left: 4px;
            font-size: 12px;
        }
        /* Toast üzenet stílusa */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            color: #f3f4f6;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .toast.success {
            background-color: #16a34a; /* bg-green-600 */
        }
        .toast.error {
            background-color: #dc2626; /* bg-red-600 */
        }
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
        /* Fade-in animáció a táblázat soraihoz */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .table-row {
            animation: fadeIn 0.3s ease-in-out;
        }
        /* Drag-and-drop stílusa */
        .dragging {
            opacity: 0.5;
        }
        .drag-over {
            background-color: #ca8a04; /* bg-yellow-500 */
        }
        /* Oszlop kiválasztó menü stílusa */
        .column-selector {
            position: relative;
        }
        .column-selector-options {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: #374151;
            border: 1px solid #4b5563;
            border-radius: 0.5rem;
            z-index: 10;
            display: none;
        }
        .column-selector-options div {
            padding: 8px;
            cursor: pointer;
        }
        .column-selector-options div:hover {
            background-color: #4b5563;
        }
    </style>
</head>
<body class="bg-gray-900 font-sans text-gray-100">
    <div class="container mx-auto p-4 max-w-4xl">
        <h1 class="text-3xl font-bold text-center mb-6 text-gray-100">Étel Adatbázis</h1>

        <!-- Új étel hozzáadása űrlap -->
        <div class="mb-6 p-4 bg-gray-800 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4 text-gray-100">Új étel hozzáadása</h2>
            <div class="flex flex-col sm:flex-row gap-4">
                <input id="newFoodName" type="text" placeholder="Étel neve" 
                       class="w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-700 text-gray-100 border-gray-600">
                <div class="custom-dropdown w-full sm:w-1/3">
                    <input id="newFoodGroupInput" type="text" placeholder="Étel csoport" 
                           class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-700 text-gray-100 border-gray-600">
                    <div id="newFoodGroupOptions" class="options"></div>
                </div>
                <select id="newFoodRecommendation" class="w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-700 text-gray-100 border-gray-600">
                    <option value="Igen Kérek">Igen Kérek</option>
                    <option value="Köszönöm nem kérek">Köszönöm nem kérek</option>
                </select>
                <button id="addFoodButton" class="w-full sm:w-auto p-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm hover:scale-105 transition-transform">
                    Hozzáadás
                </button>
            </div>
            <!-- Export/Import gombok -->
            <div class="flex flex-col sm:flex-row gap-4 mt-4">
                <button id="exportButton" class="w-full sm:w-auto p-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm hover:scale-105 transition-transform">
                    Export
                </button>
                <label for="importInput" class="w-full sm:w-auto p-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm hover:scale-105 transition-transform cursor-pointer text-center">
                    Import
                </label>
                <input type="file" id="importInput" accept=".json" class="hidden">
            </div>
        </div>

        <!-- Kereső és szűrő -->
        <div class="mb-4 flex flex-col sm:flex-row gap-4">
            <div class="flex w-full sm:w-1/2 gap-2">
                <input id="searchInput" type="text" placeholder="Keresés..." 
                       class="flex-grow p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-800 text-gray-100 border-gray-700">
                <button id="clearSearchButton" class="p-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm hover:scale-105 transition-transform">
                    Törlés
                </button>
                <button id="resetFiltersButton" class="p-1.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 text-sm hover:scale-105 transition-transform">
                    Reset
                </button>
            </div>
            <div class="flex w-full sm:w-1/2 gap-2">
                <select id="recommendationFilter" class="flex-grow p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-800 text-gray-100 border-gray-600">
                    <option value="all">Összes</option>
                    <option value="Igen Kérek">Igen Kérek</option>
                    <option value="Köszönöm nem kérek">Köszönöm nem kérek</option>
                </select>
                <div class="column-selector">
                    <button id="columnSelectorButton" class="p-1.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 text-sm hover:scale-105 transition-transform">
                        Oszlopok
                    </button>
                    <div id="columnSelectorOptions" class="column-selector-options">
                        <div class="flex items-center p-2">
                            <input type="checkbox" id="column-name" checked class="mr-2">
                            <label for="column-name">Megnevezés</label>
                        </div>
                        <div class="flex items-center p-2">
                            <input type="checkbox" id="column-group" checked class="mr-2">
                            <label for="column-group">Étel csoport</label>
                        </div>
                        <div class="flex items-center p-2">
                            <input type="checkbox" id="column-recommendation" checked class="mr-2">
                            <label for="column-recommendation">Ajánlás</label>
                        </div>
                        <div class="flex items-center p-2">
                            <input type="checkbox" id="column-actions" checked class="mr-2">
                            <label for="column-actions">Műveletek</label>
                        </div>
                        <div class="flex items-center p-2">
                            <input type="checkbox" id="column-note" checked class="mr-2">
                            <label for="column-note">Megjegyzés</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Táblázat -->
        <div class="overflow-x-auto max-h-[400px] overflow-y-auto">
            <table id="foodTable" class="w-full bg-gray-800 shadow-md rounded-lg">
                <thead class="sticky top-0 bg-blue-700 text-gray-100 z-10">
                    <tr>
                        <th class="p-2 text-left cursor-pointer column-name" data-sort="name">Megnevezés <span class="sort-icon"></span></th>
                        <th class="p-2 text-left cursor-pointer column-group" data-sort="group">Étel csoport <span class="sort-icon"></span></th>
                        <th class="p-2 text-left cursor-pointer w-48 whitespace-nowrap column-recommendation" data-sort="recommendation">Ajánlás <span class="sort-icon"></span></th>
                        <th class="p-2 text-left column-note">Megjegyzés</th>
                        <th class="p-2 text-left column-actions">Műveletek</th>
                    </tr>
                </thead>
                <tbody id="foodTableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        let currentData = []; // Kezdetben üres, majd betöltjük a localStorage-ból vagy a beágyazott adatokból
        let editingName = null; // Nyomon követi, hogy melyik sor van szerkesztési módban (a name mező alapján)
        let sortConfig = { key: 'name', direction: 'asc' }; // Alapértelmezett rendezés: Megnevezés szerint, növekvő sorrendben
        let draggedRow = null; // Nyomon követi az éppen áthúzott sort
        let columnVisibility = {
            'column-name': true,
            'column-group': true,
            'column-recommendation': true,
            'column-actions': true,
            'column-note': true
        }; // Oszlopok láthatóságának állapota

        // localStorage kulcsok
        const foodDataKey = 'foodData';
        const columnVisibilityKey = 'columnVisibility';

        // Ide illeszd be a foodData.json tartalmát az alábbi formátumban:
        // const initialFoodData = [ ...foodData.json tartalma... ];
        // Példa:
        // const initialFoodData = [
        //     {"name": "Áfonya", "group": "Gyümölcsök", "recommendation": "IGEN Kérek", "note": "Csak szezonálisan, kis mennyiségben fogyassza"},
        //     {"name": "Agvé", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "KÖSZÖNÖM NEMKÉREK", "note": ""},
        //     ...többi adat...
        // ];
		
		// Ide illeszd be a foodData.json tartalmát
	const initialFoodData = [
    {"name": "Áfonya", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Antioxidánsokban gazdag, szezonálisan kis mennyiségben"},
    {"name": "Agvé", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Magas fruktóztartalom, káros a bélflórára"},
    {"name": "Ajóka", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, támogatja a szív egészségét"},
    {"name": "Alakor (einkorn búza)", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt gyulladáskeltő"},
    {"name": "Alaszkai laposhal", "group": "Halak", "recommendation": "Igen Kérek", "note": "Alacsony higanytartalom, omega-3-ban gazdag"},
    {"name": "Alaszkai lazac", "group": "Halak", "recommendation": "Igen Kérek", "note": "Magas omega-3, gyulladáscsökkentő hatás"},
    {"name": "Alga olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Növényi omega-3 forrás, szívbarát"},
    {"name": "Alma", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, szezonálisan kis mennyiségben"},
    {"name": "Amerikai kelkáposzta", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Vitaminokban gazdag, méregtelenítő"},
    {"name": "Árpa", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma bélproblémákat okozhat"},
    {"name": "Árpa (nem lehet kuktában főzni)", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Magas lektintartalom, nehezen emészthető"},
    {"name": "Articsóka", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, májtámogató"},
    {"name": "Avokádó", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Egészséges zsírok, korlátozás nélkül fogyasztható"},
    {"name": "Baobab (majomkenyérfa gyümölcs)", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Barack", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Vitaminforrás, szezonálisan kis mennyiségben"},
    {"name": "Bárány", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Fehérjeforrás, napi 110 g ajánlott"},
    {"name": "Barna rizs", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Berly Breadtól Julian Bakery Paleo", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Lektinmentes pékáru, mértékkel"},
    {"name": "Bivaly mozzarella", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g ajánlott"},
    {"name": "Bivaly vaj", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "Egészséges zsír, napi 300 g ajánlott"},
    {"name": "Bor", "group": "Bor", "recommendation": "Igen Kérek", "note": "Polifenolok, napi 2 dl vörösbor ajánlott"},
    {"name": "Borsó", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt vegánok kuktában főzve ehetik"},
    {"name": "Bölény", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g ajánlott"},
    {"name": "Brazil dió (korlátozott meny.)", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Szelénforrás, napi 1/2 bögre"},
    {"name": "Brokkoli", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Méregtelenítő, antioxidánsokban gazdag"},
    {"name": "Bulgur", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma gyulladáskeltő"},
    {"name": "Burgonya Burgonya csipsz", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Glikoalkaloidok miatt kerülendő"},
    {"name": "Búza Sweet n Low (szaharin)", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom és mesterséges édesítő"},
    {"name": "Búzafű", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt nem ajánlott"},
    {"name": "Capello s fettuccine tészta", "group": "Tészták (elfogadható)", "recommendation": "Igen Kérek", "note": "Lektinmentes alternatíva"},
    {"name": "Cékla Nyers", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Méregtelenítő, antioxidánsokban gazdag"},
    {"name": "Chiamag", "group": "Diófélék és Magok", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma bélproblémákat okozhat"},
    {"name": "Chilipaprika", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, gyulladáskeltő"},
    {"name": "Cikória", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, bélbarát"},
    {"name": "Cikória gyökérből inulin", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Bélflóra támogató, természetes édesítő"},
    {"name": "Citrusfélék nem léformában", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Vitaminforrás, szezonálisan kis mennyiségben"},
    {"name": "Cukkini", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Cukor", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Gyulladást kiváltó, bélkárosító"},
    {"name": "Cukorborsó", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt vegánok kuktában főzve ehetik"},
    {"name": "Csicseriborsó", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt vegánok kuktában főzve ehetik"},
    {"name": "Csíráztatott Gabonák", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom még csíráztatva is jelen van"},
    {"name": "Csirke", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Szabadtartású fehérjeforrás, napi 200 g"},
    {"name": "Csodatészta", "group": "Tészták (elfogadható)", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "Datolya", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Természetes cukor, szezonálisan kis mennyiségben"},
    {"name": "DatolyaszilvaűJicama", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Dinnyefélék az összes", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Magas fruktóztartalom, bélproblémák"},
    {"name": "Dió", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, napi 1/2 bögre"},
    {"name": "Dióolaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, gyulladáscsökkentő"},
    {"name": "Ecetek", "group": "Ecetek", "recommendation": "Igen Kérek", "note": "Cukormentes, bélbarát"},
    {"name": "Édesburgonya", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Édesburgonya Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes alternatíva"},
    {"name": "Eper", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Antioxidánsok, szezonálisan kis mennyiségben"},
    {"name": "Eritrit (oligoszacharidokat is tartalmaz)", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Alacsony glikémiás, bélbarát"},
    {"name": "Étcsokoládé", "group": "Étcsokoládé", "recommendation": "Igen Kérek", "note": "90%-os, polifenolok, napi 30 g"},
    {"name": "Fácán Nyírfad Galamb Fürj", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 200 g"},
    {"name": "Fagyasztott joghurt", "group": "Tejtermékek (kerülendő)", "recommendation": "Köszönöm nem kérek", "note": "A1 kazein, gyulladáskeltő"},
    {"name": "Fagylalt", "group": "Tejtermékek (kerülendő)", "recommendation": "Köszönöm nem kérek", "note": "A1 kazein, bélkárosító"},
    {"name": "Fagylalt fagyasztott desszertek", "group": "Fagylalt (tejtermék mentes)", "recommendation": "Igen Kérek", "note": "Lektinmentes, cukormentes"},
    {"name": "Farcia vagy Olasz vaj", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Fehér rizs", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Fehérrépa", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Fenyőmag (korlátozott meny)", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, napi 1/2 bögre"},
    {"name": "Fésűkagyló", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, alacsony higany"},
    {"name": "Fokhagyma", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Gyulladáscsökkentő, immunerősítő"},
    {"name": "Földimogyoró", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, vegánok kuktában főzve"},
    {"name": "Földimogyoró olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Füge", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Rostforrás, szezonálisan kis mennyiségben"},
    {"name": "Fügekaktuszok", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Antioxidánsok, alacsony lektintartalom"},
    {"name": "Garnéla rák", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, sovány fehérje"},
    {"name": "Gesztenye", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Ellenálló keményítő, napi 1/2 bögre"},
    {"name": "Ghi", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "Tisztított vaj, napi 300 g"},
    {"name": "Glucoannan (konjac gyökér ördögnyelv)", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Gojibogyó", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma gyulladáskeltő"},
    {"name": "Gombák", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Immunerősítő, alacsony szénhidrát"},
    {"name": "Gránátalma", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Polifenolok, szezonálisan kis mennyiségben"},
    {"name": "Gyógynövények", "group": "Mind kivéve chilipehely Misszió", "recommendation": "Igen Kérek", "note": "Gyulladáscsökkentők, chilipehely kivételével"},
    {"name": "Hagyma", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, gyulladáscsökkentő"},
    {"name": "Hajdina", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Hawaii hal", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, alacsony higany"},
    {"name": "Homár", "group": "Halak", "recommendation": "Igen Kérek", "note": "Sovány fehérje, omega-3-ban gazdag"},
    {"name": "Hüvelyesek", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, vegánok kuktában főzve"},
    {"name": "Inulin", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Prebiotikus rost, bélbarát"},
    {"name": "Ízesített csukamájolaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Omega-3 és D-vitamin forrás"},
    {"name": "Jávorszarvas", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g"},
    {"name": "Jégcsapretek", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Méregtelenítő, alacsony lektintartalom"},
    {"name": "Jeruzsálemi articsóka", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, bélbarát"},
    {"name": "Joghurt Görög joghurt is", "group": "Tejtermékek (kerülendő)", "recommendation": "Köszönöm nem kérek", "note": "A1 kazein, gyulladáskeltő"},
    {"name": "Just Like Sugar", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Cikóriagyökér alapú, alacsony glikémiás"},
    {"name": "Kacsa", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Fehérjeforrás, napi 200 g"},
    {"name": "Kagyló", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 és ásványi anyagok forrása"},
    {"name": "Kajszibarack", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Vitaminforrás, szezonálisan kis mennyiségben"},
    {"name": "Kamut", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Kanten tészta", "group": "Tészták (elfogadható)", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "Karfiol", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Méregtelenítő, alacsony szénhidrát"},
    {"name": "Kashi", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt gyulladáskeltő"},
    {"name": "Kasszava (tápióka)", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel fogyasztható"},
    {"name": "Kasszava Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes alternatíva sütéshez"},
    {"name": "Kazein A-2-es tej csak tejszínként", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g tejszínként"},
    {"name": "Kecske- és Juhkefir", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "Probiotikumokban gazdag, napi 300 g"},
    {"name": "Kecskesjoghurt", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g ajánlott"},
    {"name": "Kecsketej Kecskesajt", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "Könnyebben emészthető, napi 300 g"},
    {"name": "Kefires Gabonák", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Kék kagyló", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, ásványi anyagokban gazdag"},
    {"name": "Kekszek", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Finomított szénhidrát, bélkárosító"},
    {"name": "Kelbimbó", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Antioxidánsokban gazdag, méregtelenítő"},
    {"name": "KelkáposztaűFehér és Vörös káposzta", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Vitaminforrás, bélbarát"},
    {"name": "Kender fehérje por", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Növényi fehérje, napi 1/2 bögre"},
    {"name": "Kendermag", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, napi 1/2 bögre"},
    {"name": "Kenyér", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom és finomított szénhidrát"},
    {"name": "Kenyér és bagettek", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Lektinmentes alternatíva, mértékkel"},
    {"name": "Kesudió", "group": "Diófélék és Magok", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma bélproblémákat okozhat"},
    {"name": "Kimcsi", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Fermentált, bélflóra támogató"},
    {"name": "Kivi", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "C-vitamin forrás, szezonálisan kis mennyiségben"},
    {"name": "Kókusz Fagylalt max 1gr cukor", "group": "Fagylalt", "recommendation": "Igen Kérek", "note": "Lektinmentes, max 1 g cukorral"},
    {"name": "Kókusz Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "Kókuszdió Nem kókusz víz", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, napi 1/2 bögre"},
    {"name": "Kókuszjoghurt", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "Növényi alapú, napi 300 g"},
    {"name": "Kókuszlisztes müzli", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Lektinmentes, mértékkel"},
    {"name": "Kókusztej Édesítetlen tejtermékpótló", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Napi 1/2 bögre, cukormentes"},
    {"name": "Kókusztejszín édesítetlen", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, napi 1/2 bögre"},
    {"name": "Konzerv tonhal", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, alacsony higany"},
    {"name": "Koriander", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Gyulladáscsökkentő, méregtelenítő"},
    {"name": "Köles Cirok", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Kukorica", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Magas lektintartalom, gyulladáskeltő"},
    {"name": "Kukorica keményítő", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Finomított, bélkárosító"},
    {"name": "Kukorica olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Kukorica szirup", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Magas fruktóztartalom, káros"},
    {"name": "Kukoricás termékek", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Lenmag", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, napi 1/2 bögre"},
    {"name": "Liba", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Fehérjeforrás, napi 200 g"},
    {"name": "Light italok", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Mesterséges édesítők, káros"},
    {"name": "Liszt", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Finomított szénhidrát, bélkárosító"},
    {"name": "Luo hanguo (Nutresse márka jó)", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Természetes édesítő, Nutresse ajánlott"},
    {"name": "Makadámdió-olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, gyulladáscsökkentő"},
    {"name": "Makadámdió", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Omega-7 forrás, napi 1/2 bögre"},
    {"name": "Málna", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Antioxidánsokban gazdag, szezonálisan"},
    {"name": "Maltodextrin", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Gyorsan felszívódó szénhidrát"},
    {"name": "Mandula Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "Mángold", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Vitaminforrás, bélbarát"},
    {"name": "Maréna Édesvízi sügér", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, napi 60-120 g"},
    {"name": "Marhahús", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g"},
    {"name": "Meggy", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Antioxidánsok, szezonálisan kis mennyiségben"},
    {"name": "Minden babféle a csírák is", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"},
    {"name": "Minden lencse", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"},
    {"name": "Mogyoró", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, napi 1/2 bögre"},
    {"name": "Mogyoró Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes alternatíva sütéshez"},
    {"name": "Mogyoróhagyma", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, gyulladáscsökkentő"},
    {"name": "Müzli", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom és finomított szénhidrát"},
    {"name": "Napa káposztaűKínai kel", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Vitaminforrás, méregtelenítő"},
    {"name": "Napraforgó olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Napraforgómag", "group": "Diófélék és Magok", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Nektarin", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Vitaminforrás, szezonálisan kis mennyiségben"},
    {"name": "Nutraweet (aszpartan)", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Mesterséges édesítő, káros"},
    {"name": "Nyers savanyú káposzta", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Probiotikumokban gazdag, bélbarát"},
    {"name": "Nyílgyökér Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "OkraűSpárga", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Rostban gazdag, alacsony lektintartalom"},
    {"name": "Olajok", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Csak lektinmentes olajok, pl. olíva, kókusz"},
    {"name": "Olíva olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Monotelítetlen zsír, gyulladáscsökkentő"},
    {"name": "Organikus sajtkrém", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Organikus tejföl", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Organikus tejszín", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Osztriga", "group": "Halak", "recommendation": "Igen Kérek", "note": "Cink és omega-3 forrás"},
    {"name": "Padlizsán", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, gyulladáskeltő"},
    {"name": "Pakchoi", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Vitaminforrás, alacsony szénhidrát"},
    {"name": "Pálmaszív", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Rostban gazdag, alacsony lektintartalom"},
    {"name": "Pamutmag olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Paprika", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, bélkárosító"},
    {"name": "Paradicsom", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, gyulladáskeltő"},
    {"name": "Parmigiano-Reggiano", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Pasta Slim tészta", "group": "Tészták (elfogadható)", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "PaszternákűJukka", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Pattogatott kukorica", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, bélkárosító"},
    {"name": "Pekándió", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Egészséges zsír, napi 1/2 bögre"},
    {"name": "Perilla olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, gyulladáscsökkentő"},
    {"name": "Pisztácia", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Antioxidánsok, napi 1/2 bögre"},
    {"name": "Póréhagyma", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Prebiotikus rostok, bélbarát"},
    {"name": "Pórsáfrány olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Prosciutto", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g"},
    {"name": "Pulyka", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Fehérjeforrás, napi 200 g"},
    {"name": "Quinoa", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Rágcsálnivalók", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Finomított szénhidrát, káros"},
    {"name": "Rák", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, sovány fehérje"},
    {"name": "Ratabaga", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Répa", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Béta-karotin forrás, alacsony lektintartalom"},
    {"name": "Repce olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Retek", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Méregtelenítő, vitaminforrás"},
    {"name": "Rizs", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Rizskorpa olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Antioxidánsokban gazdag, mértékkel"},
    {"name": "Ropogós Körte (Anjou bosc comice)", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Rostforrás, szezonálisan kis mennyiségben"},
    {"name": "Rozs (nem lehet kuktában főzni)", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Röviditalok", "group": "Röviditalok", "recommendation": "Igen Kérek", "note": "Tiszta alkohol, napi 15 ml ajánlott"},
    {"name": "Rukola", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Antioxidánsokban gazdag, bélbarát"},
    {"name": "Sajt Rikotta Túró", "group": "Tejtermékek (kerülendő)", "recommendation": "Köszönöm nem kérek", "note": "A1 kazein, gyulladáskeltő"},
    {"name": "Savófehérje por", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g ajánlott"},
    {"name": "Sertéshús emberséggel nevelt", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g"},
    {"name": "Shirataki tészta", "group": "Tészták (elfogadható)", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "Siete márkájú tortilla, kaszava", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Lektinmentes, mértékkel"},
    {"name": "Splenda (szukralóz)", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Mesterséges édesítő, káros"},
    {"name": "Strucc", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 200 g"},
    {"name": "Sütemények", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Finomított szénhidrát, bélkárosító"},
    {"name": "Sütőtök", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, gyulladáskeltő"},
    {"name": "Svájci sajt", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Swett One Sunett (aceszulfát K)", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Mesterséges édesítő, káros"},
    {"name": "Szabadtartású vagy omega3 tojás max 4db", "group": "Hús (szabadtartású)", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, max 4 db/nap"},
    {"name": "Szardínia", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 és kalcium forrás"},
    {"name": "Szerzetesek körtéje", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Természetes édesítő, alacsony glikémiás"},
    {"name": "Szezám mag", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Ásványi anyagokban gazdag, napi 1/2 bögre"},
    {"name": "Szezám olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Antioxidánsok, gyulladáscsökkentő"},
    {"name": "Szilva", "group": "Gyümölcsök", "recommendation": "Igen Kérek", "note": "Rostforrás, szezonálisan kis mennyiségben"},
    {"name": "Szója", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"},
    {"name": "Szója olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Szójafehérje", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"},
    {"name": "Szőlőmag Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes, antioxidánsokban gazdag"},
    {"name": "Szőlőmag olaj", "group": "Olajok", "recommendation": "Köszönöm nem kérek", "note": "Magas omega-6, gyulladáskeltő"},
    {"name": "Sztívia", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Természetes édesítő, alacsony glikémiás"},
    {"name": "Tarógyökér", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Tej", "group": "Tejtermékek (kerülendő)", "recommendation": "Köszönöm nem kérek", "note": "A1 kazein, bélkárosító"},
    {"name": "Tengeri hínár tészta", "group": "Tészták (elfogadható)", "recommendation": "Igen Kérek", "note": "Lektinmentes, alacsony szénhidrát"},
    {"name": "Tészta", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom és finomított szénhidrát"},
    {"name": "Textúrált zöldségfehérje", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"},
    {"name": "Tigrismogyoró", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Tigrismogyoró Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes alternatíva"},
    {"name": "Tintahal", "group": "Halak", "recommendation": "Igen Kérek", "note": "Omega-3 forrás, sovány fehérje"},
    {"name": "Tofu", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"},
    {"name": "Tortilla", "group": "Finomított keményítőt tartalmazó ételek", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom és finomított szénhidrát"},
    {"name": "Tökféle az összes", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, gyulladáskeltő"},
    {"name": "Tökmag", "group": "Diófélék és Magok", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Tönkölybúza", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt gyulladáskeltő"},
    {"name": "Uborka", "group": "Gyümölcsök (botanikailag)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma bélproblémákat okozhat"},
    {"name": "Útifűmag", "group": "Diófélék és Magok", "recommendation": "Igen Kérek", "note": "Rostforrás, napi 1/2 bögre"},
    {"name": "Vad rizs", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Vaddisznó", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g"},
    {"name": "Vadhús", "group": "Hús (legelőn nevelt)", "recommendation": "Igen Kérek", "note": "Sovány fehérje, napi 110 g"},
    {"name": "Valódi parmezán", "group": "Tejtermékek", "recommendation": "Igen Kérek", "note": "A2 kazein, napi 300 g"},
    {"name": "Víztorma", "group": "Zöldségek (keresztesvirágúak)", "recommendation": "Igen Kérek", "note": "Antioxidánsokban gazdag, méregtelenítő"},
    {"name": "Vöröspálma-olaj", "group": "Olajok", "recommendation": "Igen Kérek", "note": "Béta-karotin forrás, gyulladáscsökkentő"},
    {"name": "Wrap (kókuszlisztből)", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Lektinmentes, mértékkel"},
    {"name": "Xilit", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Alacsony glikémiás, bélbarát"},
    {"name": "Yacon Mexikói jamgyökér", "group": "Édesítők", "recommendation": "Igen Kérek", "note": "Prebiotikus rost, természetes édesítő"},
    {"name": "Zab (nem lehet kuktában főzni)", "group": "Pszeudo-gabonák", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalma miatt kerülendő"},
    {"name": "Zeller", "group": "Zöldségek", "recommendation": "Igen Kérek", "note": "Gyulladáscsökkentő, alacsony lektintartalom"},
    {"name": "Zellergyökér", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Rostban gazdag, mértékkel"},
    {"name": "Zöld banán főzőbanán", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Ellenálló keményítő, mértékkel"},
    {"name": "Zöld banán Liszt", "group": "Lisztek", "recommendation": "Igen Kérek", "note": "Lektinmentes, rostban gazdag"},
    {"name": "Zöld mangó és papaya", "group": "Ellenálló keményítők", "recommendation": "Igen Kérek", "note": "Ellenálló keményítő, mértékkel"},
    {"name": "Zöld szójabab", "group": "Zöldségek (lektintartalmúak)", "recommendation": "Köszönöm nem kérek", "note": "Lektintartalom, kuktában főzve vegánok"}
];

        // Toast üzenet megjelenítése
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);

            // Animáció: megjelenés
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);

            // Animáció: eltűnés 3 másodperc után
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }

        // Adatok betöltése a beágyazott adatokból
        function loadInitialData() {
            return initialFoodData;
        }

        // Adatok betöltése localStorage-ból vagy a beágyazott adatokból ezt módosítottam!!!
        async function loadDataFromLocalStorage() {
    const savedData = localStorage.getItem(foodDataKey);
    let isValidData = false;

    if (savedData) {
        try {
            const parsedData = JSON.parse(savedData);
            // Ellenőrizzük, hogy minden tételnek van-e name, group, recommendation és note mezője
            isValidData = Array.isArray(parsedData) && parsedData.every(item => 
                item.name && typeof item.name === 'string' &&
                item.group && typeof item.group === 'string' &&
                item.recommendation && typeof item.recommendation === 'string' &&
                typeof item.note === 'string' // note mező ellenőrzése
            );
            if (isValidData) {
                currentData = parsedData;
                console.log('Adatok betöltve a localStorage-ból:', currentData);
            } else {
                console.log('A localStorage adatai nem megfelelőek, initialFoodData betöltése...');
            }
        } catch (error) {
            console.error('Hiba a localStorage adatok betöltése során:', error);
        }
    }

    if (!isValidData) {
        currentData = loadInitialData();
        // Ha az initialFoodData üres, használjunk egy alapértelmezett adathalmazt
        if (!currentData || currentData.length === 0) {
            console.log('Az initialFoodData üres, alapértelmezett adatok betöltése...');
            currentData = [
                {"name": "Alapértelmezett Étel", "group": "Egyéb", "recommendation": "Igen Kérek", "note": "Ez egy alapértelmezett tétel, mert az initialFoodData üres volt."}
            ];
        }
        localStorage.setItem(foodDataKey, JSON.stringify(currentData));
        console.log('Adatok betöltve az initialFoodData-ból:', currentData);
    }

    // Ha a currentData üres, figyelmeztetés
    if (!currentData || currentData.length === 0) {
        console.log('A currentData üres, ellenőrizd az initialFoodData változót!');
        showToast('Nincsenek betöltött adatok. Kérlek, ellenőrizd az initialFoodData változót!', 'error');
        return;
    }

    // Táblázat renderelése és csoportok feltöltése
    renderTable(currentData);
    populateGroupOptions();
}

    if (!isValidData) {
        currentData = loadInitialData();
        // Ha az initialFoodData üres, használjunk egy alapértelmezett adathalmazt
        if (!currentData || currentData.length === 0) {
            console.log('Az initialFoodData üres, alapértelmezett adatok betöltése...');
            currentData = [
                {"name": "Alapértelmezett Étel", "group": "Egyéb", "recommendation": "Igen Kérek", "note": "Ez egy alapértelmezett tétel, mert az initialFoodData üres volt."}
            ];
        }
        localStorage.setItem(foodDataKey, JSON.stringify(currentData));
        console.log('Adatok betöltve az initialFoodData-ból:', currentData);
    }

    // Ha a currentData üres, figyelmeztetés
    if (!currentData || currentData.length === 0) {
        console.log('A currentData üres, ellenőrizd az initialFoodData változót!');
        showToast('Nincsenek betöltött adatok. Kérlek, ellenőrizd az initialFoodData változót!', 'error');
        return;
    }
}

            // Eltávolítjuk a " jeleket az ételcsoportokból és frissítjük a recommendation értékeket
            currentData = currentData.map(item => ({
                ...item,
                group: item.group.replace(/"/g, ''),
                recommendation: item.recommendation === "IGEN Kérek" ? "Igen Kérek" : 
                               item.recommendation === "KÖSZÖNÖM NEMKÉREK" ? "Köszönöm nem kérek" : item.recommendation,
                note: item.note || '' // Biztosítjuk, hogy a note mindig string legyen
            }));

            // Oszlopok láthatóságának betöltése
            const savedVisibility = localStorage.getItem(columnVisibilityKey);
            if (savedVisibility) {
                columnVisibility = JSON.parse(savedVisibility);
            }

            // Inicializáláskor rendezzük a currentData-t a sortConfig alapján
            sortData();
            // Mentsük az adatokat a localStorage-ba a " jelek eltávolítása és a feliratok frissítése után
            saveDataToLocalStorage();
            // Frissítjük a táblázatot a betöltött adatokkal
            filterTable(currentData);
        }

        // Adatok mentése localStorage-ba
        function saveDataToLocalStorage() {
            localStorage.setItem(foodDataKey, JSON.stringify(currentData));
            localStorage.setItem(columnVisibilityKey, JSON.stringify(columnVisibility));
        }

        // Rendezési logika
        function sortData() {
            currentData.sort((a, b) => {
                let valueA = a[sortConfig.key];
                let valueB = b[sortConfig.key];

                if (sortConfig.key === 'name' || sortConfig.key === 'group' || sortConfig.key === 'recommendation') {
                    valueA = valueA.toLowerCase();
                    valueB = valueB.toLowerCase();
                    if (sortConfig.direction === 'asc') {
                        return valueA.localeCompare(valueB);
                    } else {
                        return valueB.localeCompare(valueA);
                    }
                }
                return 0;
            });
            filterTable(currentData);
        }

        // Oszlopfejléc kattintás kezelése
        function handleSort(event) {
            const key = event.target.getAttribute('data-sort');
            if (!key) return;

            if (sortConfig.key === key) {
                // Ha ugyanarra az oszlopra kattintunk, váltjuk az irányt
                sortConfig.direction = sortConfig.direction === 'asc' ? 'desc' : 'asc';
            } else {
                // Ha másik oszlopra kattintunk, alapértelmezett irány: asc
                sortConfig.key = key;
                sortConfig.direction = 'asc';
            }

            // Frissítjük a nyíl ikonokat
            document.querySelectorAll('.sort-icon').forEach(icon => {
                icon.textContent = '';
            });
            const sortIcon = event.target.querySelector('.sort-icon');
            sortIcon.textContent = sortConfig.direction === 'asc' ? '↑' : '↓';

            sortData();
        }

        // Egyedi ételcsoportok kinyerése
        function getUniqueGroups() {
            const groups = [...new Set(currentData.map(item => item.group))];
            return groups.sort();
        }

        // Speciális karakterek escape-elése HTML attribútumokhoz
        function escapeHtmlAttribute(value) {
            return value.replace(/'/g, '');
        }

        // Ételcsoport legördülő lista feltöltése kereshető módon
        function setupSearchableDropdown(inputId, optionsId) {
            const input = document.getElementById(inputId);
            const optionsContainer = document.getElementById(optionsId);
            let allGroups = getUniqueGroups();

            function populateOptions(groups) {
                optionsContainer.innerHTML = '';
                groups.forEach(group => {
                    const option = document.createElement('div');
                    option.textContent = group;
                    option.className = 'option';
                    option.addEventListener('click', () => {
                        input.value = group;
                        optionsContainer.style.display = 'none';
                    });
                    optionsContainer.appendChild(option);
                });
            }

            populateOptions(allGroups);

            input.addEventListener('input', () => {
                const searchTerm = input.value.toLowerCase();
                const filteredGroups = allGroups.filter(group => group.toLowerCase().includes(searchTerm));
                populateOptions(filteredGroups);
                optionsContainer.style.display = filteredGroups.length > 0 ? 'block' : 'none';
            });

            input.addEventListener('focus', () => {
                optionsContainer.style.display = 'block';
            });

            document.addEventListener('click', (e) => {
                if (!input.contains(e.target) && !optionsContainer.contains(e.target)) {
                    optionsContainer.style.display = 'none';
                }
            });
        }

        // Oszlop kiválasztó menü inicializálása
        function setupColumnSelector() {
            const columnSelectorButton = document.getElementById('columnSelectorButton');
            const columnSelectorOptions = document.getElementById('columnSelectorOptions');

            columnSelectorButton.addEventListener('click', () => {
                columnSelectorOptions.style.display = columnSelectorOptions.style.display === 'block' ? 'none' : 'block';
            });

            document.addEventListener('click', (e) => {
                if (!columnSelectorButton.contains(e.target) && !columnSelectorOptions.contains(e.target)) {
                    columnSelectorOptions.style.display = 'none';
                }
            });

            // Oszlopok láthatóságának inicializálása
            Object.keys(columnVisibility).forEach(column => {
                const checkbox = document.getElementById(column);
                checkbox.checked = columnVisibility[column];
                toggleColumnVisibility(column, columnVisibility[column]);
                checkbox.addEventListener('change', () => {
                    columnVisibility[column] = checkbox.checked;
                    toggleColumnVisibility(column, checkbox.checked);
                    saveDataToLocalStorage();
                });
            });
        }

        // Oszlop láthatóságának kezelése
        function toggleColumnVisibility(columnClass, isVisible) {
            const elements = document.querySelectorAll(`.${columnClass}`);
            elements.forEach(element => {
                if (isVisible) {
                    element.classList.remove('hidden');
                } else {
                    element.classList.add('hidden');
                }
            });
        }

        // Étel nevének ellenőrzése
        function checkFoodName(name, excludeName = null) {
            return currentData.some(item => item.name.toLowerCase() === name.toLowerCase() && item.name !== excludeName);
        }

        function populateTable(data) {
            const tbody = document.getElementById('foodTableBody');
            tbody.innerHTML = '';
            try {
                if (!data || data.length === 0) {
                    showToast('A keresett elem vagy étel nem található a listában.', 'error');
                    return;
                }
                data.forEach((item, index) => {
                    // Debug: Ellenőrizzük az item.note értékét
                    console.log(`Item: ${item.name}, Note: ${item.note}, Type: ${typeof item.note}`);

                    const row = document.createElement('tr');
                    row.className = `border-b border-gray-700 hover:shadow-lg table-row ${item.recommendation === 'Igen Kérek' ? 'bg-green-900' : 'bg-red-900'}`;
                    row.dataset.name = item.name;
                    row.draggable = true; // Drag-and-drop engedélyezése

                    const isEditing = editingName === item.name;
                    if (isEditing) {
                        const groupOptions = getUniqueGroups().map(group => 
                            `<option value="${escapeHtmlAttribute(group)}" ${item.group === group ? 'selected' : ''}>${group}</option>`
                        ).join('');
                        row.innerHTML = `
                            <td class="p-2 column-name"><input type="text" value="${escapeHtmlAttribute(item.name)}" class="edit-name w-full p-1 bg-gray-700 text-gray-100 border border-gray-600 rounded"></td>
                            <td class="p-2 column-group">
                                <select class="edit-group w-full p-1 bg-gray-700 text-gray-100 border border-gray-600 rounded">
                                    ${groupOptions}
                                </select>
                            </td>
                            <td class="p-2 w-48 column-recommendation">
                                <select class="edit-recommendation w-full p-1 bg-gray-700 text-gray-100 border border-gray-600 rounded">
                                    <option value="Igen Kérek" ${item.recommendation === 'Igen Kérek' ? 'selected' : ''}>Igen Kérek</option>
                                    <option value="Köszönöm nem kérek" ${item.recommendation === 'Köszönöm nem kérek' ? 'selected' : ''}>Köszönöm nem kérek</option>
                                </select>
                            </td>
                            <td class="p-2 column-note"><input type="text" value="${item.note || ''}" class="edit-note w-full p-1 bg-gray-700 text-gray-100 border border-gray-600 rounded"></td>
                            <td class="p-2 column-actions">
                                <div class="flex flex-row gap-1">
                                    <button class="save-button py-0.5 px-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm hover:scale-105 transition-transform">Mentés</button>
                                    <button class="delete-button py-0.5 px-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm hover:scale-105 transition-transform">Töröl</button>
                                </div>
                            </td>
                        `;
                        row.querySelector('.save-button').addEventListener('click', (e) => {
                            e.stopPropagation();
                            saveRow(item.name);
                        });
                        row.querySelector('.delete-button').addEventListener('click', (e) => {
                            e.stopPropagation();
                            deleteRow(item.name);
                        });
                        row.querySelector('.edit-group').addEventListener('click', (e) => e.stopPropagation());
                        row.querySelector('.edit-recommendation').addEventListener('click', (e) => e.stopPropagation());
                    } else {
                        // Biztosítjuk, hogy az item.note mindig string legyen a megjelenítéskor
                        const noteValue = item.note !== undefined && item.note !== null ? item.note : '';
                        row.innerHTML = `
                            <td class="p-2 column-name">${item.name}</td>
                            <td class="p-2 column-group">${item.group}</td>
                            <td class="p-2 w-48 whitespace-nowrap column-recommendation ${item.recommendation === 'Igen Kérek' ? 'text-green-400' : 'text-red-500'}">${item.recommendation}</td>
                            <td class="p-2 column-note">${noteValue}</td>
                            <td class="p-2 column-actions">
                                <div class="flex flex-row gap-1">
                                    <button class="edit-button py-0.5 px-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm hover:scale-105 transition-transform">Szerk.</button>
                                    <button class="delete-button py-0.5 px-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm hover:scale-105 transition-transform">Töröl</button>
                                </div>
                            </td>
                        `;
                        row.querySelector('.edit-button').addEventListener('click', (e) => {
                            e.stopPropagation();
                            if (editingName !== null && editingName !== item.name) {
                                // Csak akkor mentsük az előző szerkesztést, ha valóban van mit menteni
                                const previousRow = document.querySelector(`tr[data-name="${editingName}"]`);
                                if (previousRow) {
                                    saveRow(editingName);
                                }
                            }
                            editingName = item.name;
                            populateTable(data);
                        });
                        row.querySelector('.delete-button').addEventListener('click', (e) => {
                            e.stopPropagation();
                            deleteRow(item.name);
                        });
                    }

                    // Drag-and-drop eseménykezelők
                    row.addEventListener('dragstart', (e) => {
                        draggedRow = row;
                        row.classList.add('dragging');
                        e.dataTransfer.setData('text/plain', index);
                    });
                    row.addEventListener('dragend', () => {
                        row.classList.remove('dragging');
                        document.querySelectorAll('.drag-over').forEach(r => r.classList.remove('drag-over'));
                        draggedRow = null;
                    });
                    row.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        if (draggedRow && draggedRow !== row) {
                            row.classList.add('drag-over');
                        }
                    });
                    row.addEventListener('dragleave', () => {
                        row.classList.remove('drag-over');
                    });
                    row.addEventListener('drop', (e) => {
                        e.preventDefault();
                        if (draggedRow && draggedRow !== row) {
                            const draggedIndex = Array.from(tbody.children).indexOf(draggedRow);
                            const targetIndex = Array.from(tbody.children).indexOf(row);
                            // Sorok átrendezése a currentData tömbben
                            const [draggedItem] = currentData.splice(draggedIndex, 1);
                            currentData.splice(targetIndex, 0, draggedItem);
                            // Táblázat újrarajzolása
                            populateTable(currentData);
                            saveDataToLocalStorage(); // Sorrend mentése
                        }
                        row.classList.remove('drag-over');
                    });

                    tbody.appendChild(row);
                });
            } catch (error) {
                console.error('Hiba a táblázat feltöltése közben:', error);
                showToast('Hiba történt az adatok betöltése közben. Kérlek, próbáld újra!', 'error');
            }
        }

        function deleteRow(name) {
            const confirmDelete = confirm(`Biztosan törölni szeretnéd a(z) "${name}" ételt?`);
            if (confirmDelete) {
                currentData = currentData.filter(item => item.name !== name);
                editingName = null;
                filterTable(currentData);
                saveDataToLocalStorage(); // Adatok mentése localStorage-ba
                showToast(`A(z) "${name}" étel törölve!`, 'success');
            }
        }

        function saveRow(name) {
            const row = document.querySelector(`tr[data-name="${name}"]`);
            if (!row) return; // Ha a sor nem létezik, kilépünk

            const newName = row.querySelector('.edit-name').value.trim();
            const newGroup = row.querySelector('.edit-group').value;
            const newRecommendation = row.querySelector('.edit-recommendation').value;
            const newNote = row.querySelector('.edit-note').value.trim();

            if (!newName || !newGroup) {
                showToast('Kérlek, add meg az étel nevét és válassz egy ételcsoportot!', 'error');
                return;
            }

            if (checkFoodName(newName, name)) {
                showToast('Ez az étel neve már szerepel a listában! Kérlek, válassz másik nevet.', 'error');
                return;
            }

            const originalItem = currentData.find(item => item.name === name);
            const hasChanged = newName !== originalItem.name || newGroup !== originalItem.group || newRecommendation !== originalItem.recommendation || newNote !== (originalItem.note || '');

            const index = currentData.findIndex(item => item.name === name);
            currentData[index] = { name: newName, group: newGroup, recommendation: newRecommendation, note: newNote };
            editingName = null;
            filterTable(currentData);
            saveDataToLocalStorage(); // Adatok mentése localStorage-ba

            if (hasChanged) {
                showToast('A módosítás sikeresen mentve!', 'success');
            }
        }

        function filterTable(data) {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const recommendationFilter = document.getElementById('recommendationFilter').value.toLowerCase();

            let filteredData = data;

            if (recommendationFilter !== 'all') {
                filteredData = filteredData.filter(item => item.recommendation.toLowerCase() === recommendationFilter);
            }

            filteredData = filteredData.filter(item => 
                item.name.toLowerCase().includes(searchTerm) ||
                item.group.toLowerCase().includes(searchTerm) ||
                item.recommendation.toLowerCase().includes(searchTerm) ||
                (item.note && item.note.toLowerCase().includes(searchTerm))
            );

            populateTable(filteredData);
        }

        function clearSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.value = ''; // Kereső mező kiürítése
            filterTable(currentData); // Táblázat frissítése az összes adattal
        }

        function resetFilters() {
            const searchInput = document.getElementById('searchInput');
            const recommendationFilter = document.getElementById('recommendationFilter');
            searchInput.value = ''; // Kereső mező kiürítése
            recommendationFilter.value = 'all'; // Szűrő visszaállítása "Összes"-re
            filterTable(currentData); // Táblázat frissítése az összes adattal
        }

        function exportData() {
            if (!currentData || currentData.length === 0) {
                showToast('Nincs exportálható adat!', 'error');
                return;
            }
            try {
                const dataStr = JSON.stringify(currentData, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'foodData.json';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showToast('Adatok sikeresen exportálva!', 'success');
            } catch (error) {
                console.error('Hiba az exportálás során:', error);
                showToast('Hiba történt az exportálás során. Kérlek, próbáld újra!', 'error');
            }
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const importedData = JSON.parse(e.target.result);
                    if (Array.isArray(importedData)) {
                        currentData = importedData.map(item => ({
                            name: item.name || '',
                            group: item.group || '',
                            recommendation: item.recommendation === "IGEN Kérek" ? "Igen Kérek" : 
                                           item.recommendation === "KÖSZÖNÖM NEMKÉREK" ? "Köszönöm nem kérek" : item.recommendation || '',
                            note: item.note || ''
                        }));
                        filterTable(currentData);
                        saveDataToLocalStorage();
                        setupSearchableDropdown('newFoodGroupInput', 'newFoodGroupOptions');
                        showToast('Adatok sikeresen importálva!', 'success');
                    } else {
                        showToast('Érvénytelen adatformátum! Kérlek, válassz egy érvényes JSON fájlt.', 'error');
                    }
                } catch (error) {
                    console.error('Hiba az importálás során:', error);
                    showToast('Hiba történt az importálás során. Kérlek, próbáld újra!', 'error');
                }
            };
            reader.readAsText(file);
        }

        function addFood() {
            const name = document.getElementById('newFoodName').value.trim();
            const group = document.getElementById('newFoodGroupInput').value.trim();
            const recommendation = document.getElementById('newFoodRecommendation').value;

            if (!name || !group) {
                showToast('Kérlek, add meg az étel nevét és válassz vagy adj meg egy ételcsoportot!', 'error');
                return;
            }

            if (checkFoodName(name)) {
                showToast('Ez az étel neve már szerepel a listában! Kérlek, válassz másik nevet.', 'error');
                return;
            }

            const newFood = { name, group, recommendation, note: '' };
            currentData.push(newFood);

            // Űrlap ürítése
            document.getElementById('newFoodName').value = '';
            document.getElementById('newFoodGroupInput').value = '';

            // Táblázat frissítése
            filterTable(currentData);
            saveDataToLocalStorage(); // Adatok mentése localStorage-ba
            setupSearchableDropdown('newFoodGroupInput', 'newFoodGroupOptions');
            showToast(`A(z) "${name}" étel sikeresen hozzáadva!`, 'success');
        }

        // Eseménykezelők
        document.getElementById('addFoodButton').addEventListener('click', addFood);
        document.getElementById('searchInput').addEventListener('input', () => filterTable(currentData));
        document.getElementById('recommendationFilter').addEventListener('change', () => filterTable(currentData));
        document.getElementById('clearSearchButton').addEventListener('click', clearSearch);
        document.getElementById('resetFiltersButton').addEventListener('click', resetFilters);
        document.getElementById('exportButton').addEventListener('click', exportData);
        document.getElementById('importInput').addEventListener('change', importData);

        // Oszlopfejléc kattintás eseménykezelő
        document.querySelectorAll('th[data-sort]').forEach(header => {
            header.addEventListener('click', handleSort);
        });

        // Táblázaton kívüli kattintás figyelése
        document.addEventListener('click', (e) => {
            const table = document.getElementById('foodTable');
            if (editingName !== null && !table.contains(e.target)) {
                const previousRow = document.querySelector(`tr[data-name="${editingName}"]`);
                if (previousRow) {
                    saveRow(editingName);
                } else {
                    editingName = null;
                    filterTable(currentData);
                }
            }
        });

        // Inicializálás
        loadDataFromLocalStorage(); // Adatok betöltése localStorage-ból vagy a beágyazott adatokból
        setupSearchableDropdown('newFoodGroupInput', 'newFoodGroupOptions');
        setupColumnSelector();
    </script>
</body>
</html>